# Knative Service configuration for echo-server app
service:
  name: echo-server
  namespace: default  # Will be overridden by app generator
  image: gcr.io/cloudrun/hello
  port: 8080
  env:
    - name: PORT
      value: "8080"
    - name: SERVER_NAME
      value: "echo-server"
    - name: LOG_FORMAT
      value: "json"
  
  # Optional annotations for the Knative service
  annotations:
    autoscaling.knative.dev/minScale: "0"
    autoscaling.knative.dev/maxScale: "10"
    autoscaling.knative.dev/target: "10"
  
  # Optional labels
  labels:
    app: echo-server
    version: "1.0"
  
  resources:
    requests:
      memory: "64Mi"
      cpu: "250m"
    limits:
      memory: "256Mi"
      cpu: "500m"
  
  # Reference to ConfigMap containing non-sensitive env vars
  envFromConfigMap: "echo-server-config"
  # Reference to Secret containing sensitive env vars (to be created as SealedSecret)
  envFromSecret: "echo-server-secrets"

# ConfigMap for non-sensitive environment variables
configMap:
  enabled: true
  name: echo-server-config
  data:
    API_VERSION: "v1"
    MAX_REQUEST_SIZE: "10MB"
    ENABLE_CORS: "true"

# Secret for sensitive environment variables (to be converted to SealedSecret)
secret:
  enabled: false  # Set to true and populate data only in a secure environment
  name: echo-server-secrets
  data:
    # These would be populated in a sealed secret
    ADMIN_TOKEN: "your-encrypted-admin-token"
